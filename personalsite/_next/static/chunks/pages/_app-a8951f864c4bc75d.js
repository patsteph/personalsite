(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{92:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(4529)}])},870:(e,t,r)=>{"use strict";r.d(t,{As:()=>u,OJ:()=>d});var n=r(7876),o=r(4232),i=r(9834),a=r(3611);let s="auth_state_backup",l="auth_timestamp",c=(0,o.createContext)({user:null,loading:!0,isAuthenticated:!1,authError:null,signIn:async()=>{},signOut:async()=>{},refreshToken:async()=>null,resetAuthError:()=>{},recheckAuthState:async()=>!1});function u(){return(0,o.useContext)(c)}function d(e){let{children:t}=e,[r,u]=(0,o.useState)(null),[d,g]=(0,o.useState)(!0),[h,f]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null),w=(0,o.useRef)(null),b=(0,o.useRef)(!1),_=(0,o.useRef)({}),E=(0,o.useRef)(Date.now()),I=(0,o.useCallback)(e=>{try{localStorage.setItem(s,e?"true":"false"),localStorage.setItem(l,Date.now().toString())}catch(e){console.error("[AuthProvider] Failed to store auth state in local storage:",e)}},[]),F=(0,o.useCallback)(()=>{try{let e=localStorage.getItem(s),t=localStorage.getItem(l);if(e&&t){let r=parseInt(t,10);if(Date.now()-r<864e5)return"true"===e}}catch(e){console.error("[AuthProvider] Failed to retrieve auth state from local storage:",e)}return null},[]),v=(0,o.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];for(let t of e?[i.F0,i.iM,i.gz]:[i.iM,i.gz])try{return await (0,i.oM)(a.j2,t),console.log("[AuthProvider] Successfully set auth persistence to ".concat(t.name)),!0}catch(e){console.warn("[AuthProvider] Failed to set persistence to ".concat(t.name,":"),e)}return console.error("[AuthProvider] All persistence options failed, authentication state may not persist"),!1},[]),y=(0,o.useCallback)(async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=_.current[t]||0;try{return await e()}catch(i){if(o++,_.current[t]=o,o<r){let a=n*Math.pow(2,o-1);return console.warn("[AuthProvider] Operation ".concat(t," failed, retry attempt ").concat(o,"/").concat(r," in ").concat(a,"ms:"),i),new Promise((o,i)=>{setTimeout(async()=>{try{o(await y(e,t,r,n))}catch(e){i(e)}},a)})}throw _.current[t]=0,i}},[]),P=(0,o.useCallback)(()=>{p(null)},[]),j=(0,o.useCallback)(async()=>{let e=Date.now();if(e-E.current<3e3)return h;E.current=e,console.log("[AuthProvider] Manually rechecking auth state...");try{if(a.j2.currentUser)return h||(console.log("[AuthProvider] Firebase has authenticated user but state shows unauthenticated, fixing..."),u(a.j2.currentUser),f(!0),I(!0)),!0;let e=F();if(!0===e&&!h){console.log("[AuthProvider] Local storage indicates user should be authenticated, attempting token refresh...");try{var t;if(await (null===(t=a.j2.currentUser)||void 0===t?void 0:t.getIdToken(!0)),a.j2.currentUser)return u(a.j2.currentUser),f(!0),!0}catch(e){console.warn("[AuthProvider] Token refresh failed, user may need to login again:",e)}}return h&&(console.log("[AuthProvider] State shows authenticated but user is not, fixing..."),u(null),f(!1),I(!1)),!1}catch(e){return console.error("[AuthProvider] Error during manual auth check:",e),h}},[h,I,F]);(0,o.useEffect)(()=>(v(!0).catch(e=>{console.error("[AuthProvider] Error setting persistence:",e)}),w.current||(w.current=(0,i.hg)(a.j2,e=>{b.current=!0,u(e),f(!!e),g(!1),I(!!e),e&&p(null)},e=>{console.error("[AuthProvider] Auth state change error:",e),p(e),g(!1)})),()=>{w.current&&(w.current(),w.current=null)}),[j,v,I]);let A=(0,o.useCallback)(async()=>{try{if(a.j2.currentUser)return await a.j2.currentUser.getIdToken(!0);return null}catch(e){return console.error("[AuthProvider] Error refreshing token:",e),null}},[]),C=async function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];p(null);try{console.log("[AuthProvider] Ensuring Firebase is initialized..."),await a.TY,console.log("[AuthProvider] Firebase initialization confirmed");let n=r?i.F0:i.iM;await (0,i.oM)(a.j2,n),console.log("[AuthProvider] Auth persistence set"),console.log("[AuthProvider] Attempting sign in");let o=await (0,i.x9)(a.j2,e,t);return console.log("[AuthProvider] Sign in successful, setting user state"),u(o.user),f(!0),o}catch(e){throw console.error("[AuthProvider] Sign-in error:",e.message),p(e),e}},k=async()=>{try{for(let e=0;e<window.setInterval(()=>{},0);e++)window.clearInterval(e);await (0,i.CI)(a.j2),u(null),f(!1)}catch(e){throw console.error("[AuthProvider] Sign-out error:",e.message),p(e),e}};return(0,o.useEffect)(()=>{d||r||!a.j2.currentUser||(u(a.j2.currentUser),f(!0))},[d,r]),(0,n.jsx)(c.Provider,{value:{user:r,loading:d,isAuthenticated:h,authError:m,signIn:C,signOut:k,refreshToken:A,resetAuthError:P,recheckAuthState:j},children:t})}},3611:(e,t,r)=>{"use strict";let n,o,i;r.d(t,{DT:()=>w,TY:()=>b,ap:()=>_,j2:()=>o,kA:()=>i});var a=r(6042),s=r(9834),l=r(2964),c=r(5364);console.log("Firebase Initialization - Environment:",{NODE_ENV:"production",RUNTIME_MODE:"browser",BASE_PATH:"/personalsite"});let u=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],d=["measurementId"],g=e=>{let t=[],r=[];u.forEach(n=>{n in e?e[n]||r.push(n):t.push(n)});let n=d.filter(t=>t in e&&!e[t]),o=0===t.length&&0===r.length;return!o&&(t.length>0&&console.error("⚠️ Missing Firebase configuration fields: ".concat(t.join(", "))),r.length>0&&console.warn("⚠️ Empty Firebase configuration fields: ".concat(r.join(", ")))),n.length>0&&console.info("ℹ️ Empty optional Firebase fields: ".concat(n.join(", "))),{isValid:o,missingFields:t,emptyFields:r,emptyOptionalFields:n,allFieldsPresent:o&&0===n.length}},h=(()=>{console.log("Starting runtime config loading process...");try{if(window.runtimeConfig&&window.runtimeConfig.firebase){console.log("Using window.runtimeConfig for Firebase configuration");let e=window.runtimeConfig;if(g(e.firebase).isValid)return e;console.warn("⚠️ window.runtimeConfig has incomplete Firebase configuration, will attempt fallbacks")}if(window.__RUNTIME_CONFIG__&&window.__RUNTIME_CONFIG__.firebase){console.log("Using window.__RUNTIME_CONFIG__ for Firebase configuration");let e=window.__RUNTIME_CONFIG__;if(g(e.firebase).isValid)return e;console.warn("⚠️ window.__RUNTIME_CONFIG__ has incomplete Firebase configuration, will attempt fallbacks")}console.log("Using environment variables for Firebase configuration (browser)");let e={basePath:"/personalsite",firebase:{apiKey:"AIzaSyD4a8iaxHP9xPGV5tR5LwvzDVa5Y9o5wGQ",authDomain:"personalsite-19189.firebaseapp.com",projectId:"personalsite-19189",storageBucket:"personalsite-19189.firebasestorage.app",messagingSenderId:"892517360036",appId:"1:892517360036:web:36dda234d9f3f79562e131",measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||""}},t=g(e.firebase);return t.isValid||(console.warn("⚠️ Environment variables have incomplete Firebase configuration"),t.missingFields.forEach(e=>{let t="NEXT_PUBLIC_FIREBASE_".concat(e.toUpperCase());console.warn("Missing environment variable: ".concat(t))}),t.emptyFields.forEach(e=>{let t="NEXT_PUBLIC_FIREBASE_".concat(e.toUpperCase());console.warn("Empty environment variable: ".concat(t))})),e}catch(e){return console.error("Error loading runtime config:",e),console.warn("⚠️ Using fallback empty Firebase configuration due to error"),{basePath:"/personalsite",firebase:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""}}}})();console.log("Loaded runtime config result:",{hasFirebaseConfig:!!h.firebase,basePath:h.basePath||"[not set]"});let f={apiKey:h.firebase.apiKey,authDomain:h.firebase.authDomain,projectId:h.firebase.projectId,storageBucket:h.firebase.storageBucket,messagingSenderId:h.firebase.messagingSenderId,appId:h.firebase.appId,...h.firebase.measurementId?{measurementId:h.firebase.measurementId}:{}},m=g(f);m.isValid?console.log("✅ All Firebase configuration values are present"):(console.warn("⚠️ Firebase initialization may fail due to missing required configuration:"),m.missingFields.length>0&&console.error("❌ Missing required fields: ".concat(m.missingFields.join(", "))),m.emptyFields.length>0&&(console.error("❌ Empty required fields: ".concat(m.emptyFields.join(", "))),console.info("\uD83D\uDCA1 Check your environment variables or runtime configuration. Required variables:"),m.emptyFields.forEach(e=>{console.info("   - NEXT_PUBLIC_FIREBASE_".concat(e.toUpperCase()))})));let p=null;function w(){{if(window.runtimeConfig&&window.runtimeConfig.basePath)return window.runtimeConfig.basePath;if(window.__RUNTIME_CONFIG__&&window.__RUNTIME_CONFIG__.basePath)return window.__RUNTIME_CONFIG__.basePath;let e=window.location.pathname.match(/^\/([^/]+)/);if(window.location.hostname.includes("github.io")&&e)return e[0]}return"/personalsite"}let b=(()=>{if(p)return p;let e=g(f);if(!e.isValid)return Promise.reject(Error("Cannot initialize Firebase: Missing required configuration fields: ".concat(e.missingFields.join(", "),", ")+"Empty required fields: ".concat(e.emptyFields.join(", "))));p=new Promise((e,t)=>{if((0,a.Dk)().length)console.log("Using existing Firebase app"),n=(0,a.Dk)()[0],o=(0,s.xI)(n),i=(0,l.aU)(n),(0,s.oM)(o,s.F0).then(()=>{console.log("✅ Firebase auth persistence set to LOCAL on existing app"),e()}).catch(t=>{console.error("❌ Error setting auth persistence on existing app:",t),e()});else try{console.log("\uD83D\uDD25 Initializing Firebase with config:",Object.keys(f).reduce((e,t)=>(e[t]=f[t]?"[SET]":"[EMPTY]",e),{})),console.log("\uD83D\uDD04 Starting Firebase app initialization..."),n=(0,a.Wp)(f),console.log("✅ Firebase app initialized successfully"),console.log("\uD83D\uDD04 Setting up Firebase Auth..."),o=(0,s.xI)(n),console.log("\uD83D\uDD04 Setting Firebase auth persistence to LOCAL..."),console.log("\uD83D\uDD04 Setting up Firestore..."),i=(0,l.aU)(n),console.log("✅ Firestore initialized successfully"),(0,s.oM)(o,s.F0).then(()=>{console.log("✅ Firebase auth persistence set to LOCAL successfully"),console.log("✅ Firebase Auth created. Current user:",o.currentUser?"Logged In":"Not Logged In"),e()}).catch(t=>{console.error("❌ Error setting auth persistence:",t),console.error("Error details:",{code:t.code||"unknown",message:t.message||"No error message available",stack:t.stack}),console.warn("⚠️ Continuing Firebase initialization despite persistence error"),e()})}catch(e){console.error("❌ Error initializing Firebase:",{message:e.message||"Unknown error",code:e.code||"no_code",stack:e.stack}),t(e)}});let t=new Promise((e,t)=>{let r=setTimeout(()=>{t(Error("Firebase initialization timed out after 10 seconds"))},1e4);null==p||p.then(()=>clearTimeout(r)).catch(()=>clearTimeout(r))});return Promise.race([p,t])})().then(()=>(console.log("✅ Firebase initialization completed successfully"),Promise.resolve())).catch(e=>(console.error("❌ Firebase initialization failed:",e),Promise.reject(e)));async function _(){try{return await b,o}catch(e){throw console.error("Failed to get Auth instance:",e),e}}},4529:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(7876),o=r(870),i=r(5176);function a(e){let{children:t}=e;return(0,n.jsx)(o.OJ,{children:(0,n.jsx)(i.Dv,{children:t})})}function s(e){let{Component:t,pageProps:r}=e;return(0,n.jsx)(a,{children:(0,n.jsx)(t,{...r})})}r(6048)},5176:(e,t,r)=>{"use strict";r.d(t,{Bd:()=>l,Dv:()=>s,Yj:()=>i});var n=r(7876),o=r(4232);let i={en:"English",es:"Espa\xf1ol",de:"Deutsch",ja:"日本語",uk:"Українська"},a=(0,o.createContext)({language:"en",setLanguage:()=>{},t:(e,t)=>t}),s=e=>{let{children:t}=e,[s,l]=(0,o.useState)("en"),[c,u]=(0,o.useState)({});return(0,o.useEffect)(()=>{l(localStorage.getItem("preferred_language")||"en"),(async()=>{let e={};for(let t of Object.keys(i))try{let n=await r(6800)("./".concat(t,".json"));e[t]=n.default}catch(r){console.warn("Failed to load translations for ".concat(t),r),e[t]={}}u(e)})()},[]),(0,n.jsx)(a.Provider,{value:{language:s,setLanguage:e=>{l(e),localStorage.setItem("preferred_language",e),"undefined"!=typeof document&&(document.documentElement.lang=e)},t:(e,t)=>c[s]&&c[s][e]?c[s][e]:t},children:t})};function l(){return(0,o.useContext)(a)}},6048:()=>{},6800:(e,t,r)=>{var n={"./de.json":[2893,893],"./en.json":[4145,145],"./es.json":[2398,398],"./ja.json":[1907,907],"./uk.json":[8902,902]};function o(e){if(!r.o(n,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],o=t[0];return r.e(t[1]).then(()=>r.t(o,19))}o.keys=()=>Object.keys(n),o.id=6800,e.exports=o}},e=>{var t=t=>e(e.s=t);e.O(0,[593,299,137,789,792],()=>(t(92),t(8253))),_N_E=e.O()}]);