(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{1940:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return s(4019)}])},4019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSG:()=>g,default:()=>b});var a=s(7876),l=s(1816),o=s(4232),r=s(1660);function i(e){var t,s;let{book:l,onClick:r}=e,i=l.imageLinks&&(l.imageLinks.thumbnail||l.imageLinks.smallThumbnail),n=(0,o.useMemo)(()=>{let e={Fiction:"#3498db","Science Fiction":"#9b59b6",Fantasy:"#8e44ad",Mystery:"#34495e",Thriller:"#2c3e50",Romance:"#e74c3c",Horror:"#c0392b",Biography:"#f1c40f",History:"#f39c12",Business:"#2ecc71","Self-help":"#27ae60",Computers:"#1abc9c",Programming:"#16a085",Science:"#3498db",Mathematics:"#2980b9",Philosophy:"#7f8c8d",Religion:"#bdc3c7",Travel:"#e67e22",Cooking:"#d35400"};if(l.categories){for(let t of l.categories)if(e[t])return e[t]}let t=Math.abs(l.title.split("").reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0)%360);return"hsl(".concat(t,", 70%, 45%)")},[l.title,l.categories]),d=(0,o.useMemo)(()=>l.pageCount?Math.max(20,Math.min(40,l.pageCount/30)):30,[l.pageCount]),c={backgroundColor:n,width:"".concat(d,"px"),marginRight:"3px",writingMode:"vertical-rl",textOrientation:"mixed",backgroundSize:i?"cover":"auto",backgroundPosition:"center",backgroundRepeat:"no-repeat",...i?{backgroundImage:"url(".concat((null===(t=l.imageLinks)||void 0===t?void 0:t.thumbnail)||(null===(s=l.imageLinks)||void 0===s?void 0:s.smallThumbnail),")")}:{}};return(0,a.jsx)("div",{className:"h-40 cursor-pointer transition-transform duration-300 flex items-center justify-center text-white text-xs rounded-sm select-none ".concat(i?"book-with-cover":""),style:c,onClick:r,onMouseOver:e=>{e.currentTarget.style.transform="translateY(-10px)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)"},title:"".concat(l.title," by ").concat(l.authors.join(", ")),children:!i&&(0,a.jsx)("div",{className:"overflow-hidden p-1 text-center whitespace-nowrap text-ellipsis max-h-36",children:l.title})})}var n=s(3721),d=s(4587),c=s.n(d);function x(e){var t;let{book:s,onClose:l}=e,{t:o}=(0,n.Bd)(),r=(null===(t=s.imageLinks)||void 0===t?void 0:t.thumbnail)||"https://placehold.co/400x600/e0e0e0/808080?text=No+Cover+Available";return(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md mt-8 animate-fadeIn",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-40 h-60 bg-gray-100 flex-shrink-0 mx-auto md:mx-0",children:(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(c(),{src:r,alt:"Cover of ".concat(s.title),width:160,height:240,quality:85,priority:!0,className:"rounded object-cover w-full h-full",sizes:"(max-width: 768px) 160px, 160px",style:{maxWidth:"100%",height:"auto",objectFit:"cover"}})})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-accent",children:s.title}),l&&(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600","aria-label":"Close",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsxs)("p",{className:"text-lg mb-2",children:[o("books.by","by")," ",s.authors.join(", ")]}),s.categories&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:s.categories.join(", ")}),void 0!==s.averageRating&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[s.averageRating.toFixed(1)," / 5",s.ratingsCount&&" (".concat(s.ratingsCount," ratings)")]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("span",{className:"text-sm font-semibold mr-2",children:o("books.status","Status:")}),(0,a.jsx)("span",{className:"\n              px-3 py-1 rounded-full text-xs font-medium\n              ".concat("read"===s.status?"bg-green-100 text-green-800":"","\n              ").concat("reading"===s.status?"bg-blue-100 text-blue-800":"","\n              ").concat("toRead"===s.status?"bg-yellow-100 text-yellow-800":"","\n            "),children:(e=>{switch(e){case"read":return o("books.read","Read");case"reading":return o("books.reading","Currently Reading");case"toRead":return o("books.toRead","Want to Read");default:return e}})(s.status)})]}),(0,a.jsx)("div",{className:"my-4",children:(0,a.jsx)("p",{className:"text-gray-700",children:s.description||"No description available."})}),s.notes&&(0,a.jsxs)("div",{className:"mt-4 bg-light-accent p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:o("books.myNotes","My Notes")}),(0,a.jsx)("p",{className:"italic",children:s.notes})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-x-8 gap-y-2 text-sm text-gray-600",children:[s.publisher&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Publisher:"})," ",s.publisher]}),s.publishedDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Published:"})," ",s.publishedDate]}),s.pageCount&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Pages:"})," ",s.pageCount]}),s.isbn&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"ISBN:"})," ",s.isbn]})]})]})]})})}var h=s(9448),u=s(3753);function m(e){let{initialBooks:t,booksPerShelf:s=16}=e,[l,d]=(0,o.useState)(t||[]),[c,m]=(0,o.useState)(null),[g,b]=(0,o.useState)("all"),[f,p]=(0,o.useState)("title"),[v,j]=(0,o.useState)(!t),{t:N}=(0,n.Bd)(),{user:k}=(0,h.As)();(0,o.useEffect)(()=>{!async function(){j(!0);try{let e=await (0,r.zy)();console.log("Loaded books:",e),d(e)}catch(e){console.error("Error loading books:",e)}finally{j(!1)}}()},[]);let y=(0,o.useMemo)(()=>{let e=[...l];return"all"!==g&&(e=e.filter(e=>e.status===g)),e.sort((e,t)=>{var s,a,l;if("title"===f)return e.title.localeCompare(t.title);if("author"===f)return(null===(s=e.authors[0])||void 0===s?void 0:s.localeCompare(t.authors[0]||""))||0;if("genre"===f)return((null===(a=e.categories)||void 0===a?void 0:a[0])||"").localeCompare((null===(l=t.categories)||void 0===l?void 0:l[0])||"");if("rating"===f){let s=e.userRating||e.averageRating||0;return(t.userRating||t.averageRating||0)-s}return 0}),e},[l,g,f]),w=Math.max(1,Math.ceil(y.length/s)),C=e=>{let t=e*s;return y.slice(t,t+s)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"book-filter",className:"text-sm font-medium",children:N("books.view","View:")}),(0,a.jsxs)("select",{id:"book-filter",value:g,onChange:e=>b(e.target.value),className:"px-3 py-2 rounded border border-steel-blue bg-linen text-sm",children:[(0,a.jsx)("option",{value:"all",children:N("books.all","All Books")}),(0,a.jsx)("option",{value:"read",children:N("books.read","Read")}),(0,a.jsx)("option",{value:"reading",children:N("books.reading","Currently Reading")}),(0,a.jsx)("option",{value:"toRead",children:N("books.toRead","Want to Read")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"book-sort",className:"text-sm font-medium",children:N("books.sortBy","Sort By:")}),(0,a.jsxs)("select",{id:"book-sort",value:f,onChange:e=>p(e.target.value),className:"px-3 py-2 rounded border border-steel-blue bg-linen text-sm",children:[(0,a.jsx)("option",{value:"title",children:N("books.title","Title")}),(0,a.jsx)("option",{value:"author",children:N("books.author","Author")}),(0,a.jsx)("option",{value:"genre",children:N("books.genre","Genre")}),(0,a.jsx)("option",{value:"rating",children:N("books.rating","Rating")})]})]})]}),(0,a.jsx)(u.A,{})]}),v?(0,a.jsxs)("div",{className:"py-12 text-center",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-steel-blue border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading books..."})]}):(0,a.jsxs)(a.Fragment,{children:[Array.from({length:w}).map((e,t)=>{let s=C(t);return(0,a.jsx)("div",{className:"h-44 bg-amber-900 rounded relative flex items-end px-2 shadow-lg after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-2 after:-mb-2 after:bg-amber-950 after:rounded-b",children:s.map(e=>(0,a.jsx)(i,{book:e,onClick:()=>m(e)},e.id))},"shelf-".concat(t))}),c&&(0,a.jsx)(x,{book:c,onClose:()=>m(null)}),0===y.length&&(0,a.jsxs)("div",{className:"py-12 text-center",children:[(0,a.jsx)("p",{className:"text-xl text-gray-700",children:"No books found in your collection."}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Add some books to see them on your shelves!"})]})]})]})}var g=!0;function b(e){let{initialBooks:t,initialStats:s}=e,{t:i}=(0,n.Bd)(),[d,c]=(0,o.useState)(s);return(0,o.useEffect)(()=>{(async function(){try{let e=await (0,r.rd)();c(e)}catch(e){console.error("Error refreshing book stats:",e)}})()},[]),(0,a.jsxs)(l.A,{section:"books",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-accent mb-3",children:i("books.title","My Book Collection")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-steel-blue",children:d.total}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.totalBooks","Total Books")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:d.read}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.read","Read")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:d.reading}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.reading","Currently Reading")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:d.toRead}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.toRead","Want to Read")})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsx)("p",{className:"text-steel-blue leading-relaxed",children:"Browse my virtual bookshelf to see what I've been reading. I believe in continuous learning and often find inspiration in books related to technology, leadership, and business strategy. You can filter by reading status or sort by different criteria to explore the collection."})}),(0,a.jsx)(m,{initialBooks:t,booksPerShelf:16})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,223,299,137,789,636,792],()=>t(1940)),_N_E=e.O()}]);