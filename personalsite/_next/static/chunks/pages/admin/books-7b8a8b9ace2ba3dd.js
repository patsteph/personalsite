(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{412:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/books",function(){return s(4671)}])},4671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(7876),l=s(4232),a=s(9099),o=s(8230),i=s.n(o),r=s(4747),c=s(5960),d=s(7746),x=s(9448),u=s(1660),m=s(3721);function h(){let{user:e,loading:t}=(0,x.As)(),s=(0,a.useRouter)(),{t:o}=(0,m.Bd)(),[h,b]=(0,l.useState)(!0),[g,j]=(0,l.useState)([]),[N,f]=(0,l.useState)(null),[p,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!t&&(b(!1),e&&v())},[t,e]);let v=async()=>{try{let e=await (0,u.zy)();j(e)}catch(e){console.error("Error loading books:",e)}},k=()=>{v(),f(null),w(!1)},y=async e=>{try{let t=await (0,u.QC)(e);t&&(f(t),w(!1))}catch(e){console.error("Error fetching book:",e)}};return h?(0,n.jsx)(r.A,{section:"admin",children:(0,n.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,n.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-steel-blue border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"})})}):e?(0,n.jsxs)(r.A,{section:"admin",title:"Book Management",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-accent",children:"Book Management"}),(0,n.jsxs)(i(),{href:"/admin",className:"inline-flex items-center text-steel-blue hover:text-accent transition-colors",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,n.jsx)("div",{className:"md:col-span-1",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("h2",{className:"text-xl font-bold text-steel-blue",children:["Books (",g.length,")"]}),(0,n.jsx)("button",{onClick:()=>{f(null),w(!0)},className:"text-steel-blue hover:text-accent text-sm",children:"+ Add New Book"})]}),g.length>0?(0,n.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:g.map(e=>(0,n.jsxs)("div",{className:"\n                      p-3 rounded-lg cursor-pointer transition-colors\n                      ".concat((null==N?void 0:N.id)===e.id?"bg-light-accent border-l-4 border-steel-blue":"hover:bg-gray-50","\n                    "),onClick:()=>y(e.id),children:[(0,n.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,n.jsx)("div",{className:"text-sm text-gray-600 truncate",children:e.authors.join(", ")}),(0,n.jsx)("div",{className:"flex mt-1",children:(0,n.jsx)("span",{className:"\n                        text-xs px-2 py-0.5 rounded-full\n                        ".concat("read"===e.status?"bg-green-100 text-green-800":"","\n                        ").concat("reading"===e.status?"bg-blue-100 text-blue-800":"","\n                        ").concat("toRead"===e.status?"bg-yellow-100 text-yellow-800":"","\n                      "),children:"read"===e.status?"Read":"reading"===e.status?"Reading":"To Read"})})]},e.id))}):(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No books in your collection yet."})]})}),(0,n.jsx)("div",{className:"md:col-span-2",children:p?(0,n.jsx)(d.default,{onSuccess:k}):N?(0,n.jsx)(d.default,{existingBook:N,onSuccess:k}):(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6 flex items-center justify-center h-64",children:(0,n.jsxs)("div",{className:"text-center text-gray-500",children:[(0,n.jsx)("p",{className:"mb-4",children:"Select a book to edit or add a new one."}),(0,n.jsx)("button",{onClick:()=>w(!0),className:"bg-steel-blue hover:bg-accent text-white font-medium py-2 px-4 rounded transition-colors",children:"Add New Book"})]})})})]})]}):(0,n.jsxs)(r.A,{section:"admin",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-accent mb-8",children:o("admin.login","Admin Login")}),(0,n.jsx)(c.default,{onSuccess:()=>{s.reload()}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,223,299,137,789,636,792],()=>t(412)),_N_E=e.O()}]);