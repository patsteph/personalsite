(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1565:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(8014)}])},8014:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(7876),a=s(4232),i=s(9099),o=s(1816),r=s(870);function c(e){let{message:t="Loading..."}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,n.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-steel-blue border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:t})]})}var l=s(3611);function u(e){let{children:t}=e,{user:s,loading:o}=(0,r.As)(),u=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e=sessionStorage.getItem("auth_success"),t=sessionStorage.getItem("auth_timestamp");if("true"===sessionStorage.getItem("bypass_auth")){console.log("Using auth bypass");return}if("true"===e&&t){let e=new Date(t).getTime();if(new Date().getTime()-e<3e5){console.log("Recent auth success found, waiting for user to load");return}sessionStorage.removeItem("auth_success"),sessionStorage.removeItem("auth_timestamp")}if(!o&&!s){if(console.log("No authenticated user found, redirecting to login"),window.location.pathname.includes("/admin")&&(console.log("Suggesting alternative auth methods"),window.confirm("The regular login might not be working. Would you like to try an alternative login method?"))){window.location.href="".concat((0,l.DT)(),"/admin-access.html");return}u.replace("".concat((0,l.DT)(),"/admin/login"))}},[s,o,u]),o||"true"===sessionStorage.getItem("auth_success")&&!s)?(0,n.jsx)(c,{message:"Checking authentication..."}):"true"===sessionStorage.getItem("bypass_auth")?(0,n.jsx)(n.Fragment,{children:t}):s?(0,n.jsx)(n.Fragment,{children:t}):null}var d=s(7746),m=s(5176),g=s(7964);function h(){let e=(0,i.useRouter)(),{signOut:t}=(0,r.As)(),{t:s}=(0,m.Bd)(),[c,l]=(0,a.useState)(!1),h=async()=>{await t(),e.push("".concat(g.J,"/"))};return(0,n.jsx)(u,{children:(0,n.jsx)(o.A,{section:"admin",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-accent",children:s("admin.bookManagement","Book Management")}),(0,n.jsx)("button",{onClick:h,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded transition-colors",children:s("admin.signOut","Sign Out")})]}),c&&(0,n.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:s("admin.success","Operation completed successfully!")}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,n.jsx)(d.A,{onSuccess:()=>{l(!0),setTimeout(()=>l(!1),3e3)}})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,223,299,137,789,636,792],()=>t(1565)),_N_E=e.O()}]);