<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site Debug Info</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 {
      color: #333;
    }
    .section {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    pre {
      background: #eee;
      padding: 10px;
      overflow: auto;
    }
    .success {
      color: green;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h1>Site Debug Information</h1>
  
  <div class="section">
    <h2>Path Information</h2>
    <div id="pathInfo"></div>
  </div>
  
  <div class="section">
    <h2>Session Storage</h2>
    <div id="sessionInfo"></div>
    <button id="clearSession">Clear Session Storage</button>
  </div>
  
  <div class="section">
    <h2>Quick Actions</h2>
    <button id="toHome">Go to Home</button>
    <button id="toAdmin">Go to Admin</button>
    <button id="setAuth">Set Auth Bypass</button>
  </div>
  
  <script>
    // Display path information
    const pathInfo = document.getElementById('pathInfo');
    pathInfo.innerHTML = `<pre>
Current URL: ${window.location.href}
Pathname: ${window.location.pathname}
Base path: /personalsite
</pre>`;

    // Display session storage information
    function updateSessionInfo() {
      const sessionInfo = document.getElementById('sessionInfo');
      let sessionContent = '';
      
      for (let i = 0; i < sessionStorage.length; i++) {
        const key = sessionStorage.key(i);
        sessionContent += `${key}: ${sessionStorage.getItem(key)}\n`;
      }
      
      if (sessionContent === '') {
        sessionContent = '(No session storage items found)';
      }
      
      sessionInfo.innerHTML = `<pre>${sessionContent}</pre>`;
      
      // Check auth status
      const hasAuth = sessionStorage.getItem('auth_success') === 'true';
      sessionInfo.innerHTML += `<p class="${hasAuth ? 'success' : 'error'}">Authentication status: ${hasAuth ? 'Authenticated' : 'Not authenticated'}</p>`;
    }
    
    // Initial update
    updateSessionInfo();
    
    // Setup buttons
    document.getElementById('clearSession').addEventListener('click', function() {
      sessionStorage.clear();
      updateSessionInfo();
      alert('Session storage cleared');
    });
    
    document.getElementById('toHome').addEventListener('click', function() {
      window.location.href = '/personalsite/';
    });
    
    document.getElementById('toAdmin').addEventListener('click', function() {
      window.location.href = '/personalsite/admin';
    });
    
    document.getElementById('setAuth').addEventListener('click', function() {
      sessionStorage.setItem('auth_success', 'true');
      sessionStorage.setItem('auth_timestamp', new Date().toISOString());
      sessionStorage.setItem('bypass_auth', 'true');
      updateSessionInfo();
      alert('Auth bypass set');
    });
  </script>
</body>
</html>