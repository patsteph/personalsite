(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{1940:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return s(3786)}])},3786:(e,t,s)=>{"use strict";s.r(t),s.d(t,{__N_SSG:()=>u,default:()=>h});var a=s(7876),l=s(4747),r=s(4232),o=s(1660);function i(e){var t,s,l,o;let{book:i,onClick:n}=e,d=i.imageLinks&&(i.imageLinks.thumbnail||i.imageLinks.smallThumbnail);return(0,r.useMemo)(()=>{let e={Fiction:"#3498db","Science Fiction":"#9b59b6",Fantasy:"#8e44ad",Mystery:"#34495e",Thriller:"#2c3e50",Romance:"#e74c3c",Horror:"#c0392b",Biography:"#f1c40f",History:"#f39c12",Business:"#2ecc71","Self-help":"#27ae60",Computers:"#1abc9c",Programming:"#16a085",Science:"#3498db",Mathematics:"#2980b9",Philosophy:"#7f8c8d",Religion:"#bdc3c7",Travel:"#e67e22",Cooking:"#d35400"};if(i.categories){for(let t of i.categories)if(e[t])return e[t]}let t=Math.abs(i.title.split("").reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0)%360);return"hsl(".concat(t,", 70%, 45%)")},[i.title,i.categories]),(0,r.useMemo)(()=>i.pageCount?Math.max(20,Math.min(40,i.pageCount/30)):30,[i.pageCount]),(0,a.jsxs)("div",{className:"h-40 w-28 cursor-pointer transition-transform duration-300 flex flex-col items-center rounded overflow-hidden shadow-md select-none m-1",onClick:n,onMouseOver:e=>{e.currentTarget.style.transform="translateY(-10px)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)"},title:"".concat(i.title," by ").concat(i.authors.join(", ")),children:[(0,a.jsx)("div",{className:"relative w-full h-32 bg-gray-200 flex items-center justify-center overflow-hidden",children:d?(0,a.jsx)("div",{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:"url(".concat((null===(t=i.imageLinks)||void 0===t?void 0:t.thumbnail)||(null===(s=i.imageLinks)||void 0===s?void 0:s.smallThumbnail),")")},children:(0,a.jsx)("img",{src:(null===(l=i.imageLinks)||void 0===l?void 0:l.thumbnail)||(null===(o=i.imageLinks)||void 0===o?void 0:o.smallThumbnail),alt:"",className:"hidden",onError:e=>{console.error("Image failed to load:",i.imageLinks),e.currentTarget.parentElement&&(e.currentTarget.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-red-100 p-2"><p class="text-xs text-center font-medium text-red-700">Image Error</p></div>')}})}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-b from-gray-100 to-gray-300 p-2",children:(0,a.jsx)("p",{className:"text-xs text-center font-medium text-gray-700 line-clamp-3",children:i.title})})}),(0,a.jsxs)("div",{className:"w-full p-1 bg-white text-center",children:[(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-800 truncate",children:i.title}),(0,a.jsx)("p",{className:"text-[10px] text-gray-600 truncate",children:i.authors&&i.authors.length>0?i.authors[0]:"Unknown Author"})]})]})}var n=s(3721),d=s(4587),c=s.n(d);function x(e){var t;let{book:s,onClose:l}=e,{t:r}=(0,n.Bd)(),o=(null===(t=s.imageLinks)||void 0===t?void 0:t.thumbnail)||"https://placehold.co/400x600/e0e0e0/808080?text=No+Cover+Available";return(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-md mt-8 animate-fadeIn",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-40 h-60 bg-gray-100 flex-shrink-0 mx-auto md:mx-0",children:(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(c(),{src:o,alt:"Cover of ".concat(s.title),width:160,height:240,quality:85,priority:!0,className:"rounded object-cover w-full h-full",sizes:"(max-width: 768px) 160px, 160px",style:{maxWidth:"100%",height:"auto",objectFit:"cover"}})})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-accent",children:s.title}),l&&(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600","aria-label":"Close",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsxs)("p",{className:"text-lg mb-2",children:[r("books.by","by")," ",s.authors.join(", ")]}),s.categories&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:s.categories.join(", ")}),void 0!==s.averageRating&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[s.averageRating.toFixed(1)," / 5",s.ratingsCount&&" (".concat(s.ratingsCount," ratings)")]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("span",{className:"text-sm font-semibold mr-2",children:r("books.status","Status:")}),(0,a.jsx)("span",{className:"\n              px-3 py-1 rounded-full text-xs font-medium\n              ".concat("read"===s.status?"bg-green-100 text-green-800":"","\n              ").concat("reading"===s.status?"bg-blue-100 text-blue-800":"","\n              ").concat("toRead"===s.status?"bg-yellow-100 text-yellow-800":"","\n            "),children:(e=>{switch(e){case"read":return r("books.read","Read");case"reading":return r("books.reading","Currently Reading");case"toRead":return r("books.toRead","Want to Read");default:return e}})(s.status)})]}),(0,a.jsx)("div",{className:"my-4",children:(0,a.jsx)("p",{className:"text-gray-700",children:s.description||"No description available."})}),s.notes&&(0,a.jsxs)("div",{className:"mt-4 bg-light-accent p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:r("books.myNotes","My Notes")}),(0,a.jsx)("p",{className:"italic",children:s.notes})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-x-8 gap-y-2 text-sm text-gray-600",children:[s.publisher&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Publisher:"})," ",s.publisher]}),s.publishedDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Published:"})," ",s.publishedDate]}),s.pageCount&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Pages:"})," ",s.pageCount]}),s.isbn&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"ISBN:"})," ",s.isbn]})]})]})]})})}function m(e){let{initialBooks:t}=e,[s,l]=(0,r.useState)(t||[]),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)("all"),[h,g]=(0,r.useState)("title"),[b,f]=(0,r.useState)(!t),{t:p}=(0,n.Bd)();(0,r.useEffect)(()=>{!async function(){f(!0);try{console.log("Loading books - will attempt Firebase but fallback to sample data");try{let e=await (0,o.zy)();if(console.log("Loaded books from Firebase:",e),e&&e.length>0){l(e);return}console.warn("No books returned from Firebase")}catch(e){console.error("Error loading books from Firebase:",e)}console.log("Firebase loading failed, using empty array"),l([])}catch(e){console.error("Top-level error loading books:",e),console.log("Error loading books, using empty array"),l([])}finally{f(!1)}}()},[]);let v=(0,r.useMemo)(()=>{let e=[...s];return"all"!==m&&(e=e.filter(e=>e.status===m)),e.sort((e,t)=>{var s,a,l;if("title"===h)return e.title.localeCompare(t.title);if("author"===h)return(null===(s=e.authors[0])||void 0===s?void 0:s.localeCompare(t.authors[0]||""))||0;if("genre"===h)return((null===(a=e.categories)||void 0===a?void 0:a[0])||"").localeCompare((null===(l=t.categories)||void 0===l?void 0:l[0])||"");if("rating"===h){let s=e.userRating||e.averageRating||0;return(t.userRating||t.averageRating||0)-s}return 0}),e},[s,m,h]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"book-filter",className:"text-sm font-medium",children:p("books.view","View:")}),(0,a.jsxs)("select",{id:"book-filter",value:m,onChange:e=>u(e.target.value),className:"px-3 py-2 rounded border border-steel-blue bg-linen text-sm",children:[(0,a.jsx)("option",{value:"all",children:p("books.all","All Books")}),(0,a.jsx)("option",{value:"read",children:p("books.read","Read")}),(0,a.jsx)("option",{value:"reading",children:p("books.reading","Currently Reading")}),(0,a.jsx)("option",{value:"toRead",children:p("books.toRead","Want to Read")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"book-sort",className:"text-sm font-medium",children:p("books.sortBy","Sort By:")}),(0,a.jsxs)("select",{id:"book-sort",value:h,onChange:e=>g(e.target.value),className:"px-3 py-2 rounded border border-steel-blue bg-linen text-sm",children:[(0,a.jsx)("option",{value:"title",children:p("books.title","Title")}),(0,a.jsx)("option",{value:"author",children:p("books.author","Author")}),(0,a.jsx)("option",{value:"genre",children:p("books.genre","Genre")}),(0,a.jsx)("option",{value:"rating",children:p("books.rating","Rating")})]})]})]})}),b?(0,a.jsxs)("div",{className:"py-12 text-center",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-steel-blue border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading books..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:v.map(e=>(0,a.jsx)(i,{book:e,onClick:()=>c(e)},e.id))}),d&&(0,a.jsx)(x,{book:d,onClose:()=>c(null)}),0===v.length&&(0,a.jsxs)("div",{className:"py-8 text-center bg-white rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-xl text-gray-700",children:"No books found in your collection."}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"all"===m?"Add some books to see them here!":'No books with "'.concat(m,'" status found. Try another filter.')})]})]})]})}var u=!0;function h(e){let{initialBooks:t,initialStats:s}=e,{t:i}=(0,n.Bd)(),[d,c]=(0,r.useState)(s);return(0,r.useEffect)(()=>{(async function(){try{let e=await (0,o.rd)();c(e)}catch(e){console.error("Error refreshing book stats:",e)}})()},[]),(0,r.useEffect)(()=>{{let e=document.createElement("script");return e.src="/personalsite/firebase-check.js",e.async=!0,document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}}},[]),(0,a.jsxs)(l.A,{section:"books",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-accent mb-3",children:i("books.title","My Book Collection")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-steel-blue",children:d.total}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.totalBooks","Total Books")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:d.read}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.read","Read")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:d.reading}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.reading","Currently Reading")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:d.toRead}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:i("books.toRead","Want to Read")})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsx)("p",{className:"text-steel-blue leading-relaxed",children:"Browse my book collection to see what I've been reading. I believe in continuous learning and often find inspiration in books related to technology, leadership, and business strategy."})}),(0,a.jsx)(m,{initialBooks:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,223,299,137,789,636,792],()=>t(1940)),_N_E=e.O()}]);